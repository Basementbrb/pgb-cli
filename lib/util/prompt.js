const readline=require('readline');module.exports=(a,b)=>(b=b||{},new Promise((c,d)=>{const e=readline.createInterface({input:process.stdin,output:process.stdout});process.stdin.on('data',(c)=>{switch(c+='',c){case'\x1B':case'\x03':case'\x04':process.stdout.write('\r\n'),process.exit(1);case'\n':case'\r':e.close();break;default:if(b.mask){let b='\x1B[2K\x1B[200D'+a+Array(e.line.length+1).join('*');process.stdout.write(b)}}}),e.question(a,(a)=>{b.confirm&&'y'!==a.toLowerCase()[0]?d(new Error):c(a)})}));