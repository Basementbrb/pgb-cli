const fs=require('fs'),getCommandIndex=()=>{let a=0,b=process.argv.slice(2);for(let c=0;c<pgb.opts.variables.idx;c++)if(b[c].startsWith('-')||a++,b[c].match(/[><]/))throw new Error('pipe');return a};module.exports=()=>{try{if(pgb.opts.idx=getCommandIndex(),0===pgb.opts.idx){var a=fs.readdirSync(__dirname).filter(a=>a.endsWith('.js'));a=a.map(a=>a.slice(0,-3));let b=['usage','completion'];a=a.filter(a=>-1===b.indexOf(a)),console.log(a.join('\n'))}else{let a=`${__dirname}/${pgb.opts.commands[0]}.js`;if(fs.existsSync(a))return Promise.resolve(require(a).completion()).then(a=>console.log((a||['']).join('\n'))).catch(a=>pgb.debug(a))}}catch(a){pgb.debug(a)}return Promise.resolve()};